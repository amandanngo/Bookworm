{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\madis\\\\OneDrive\\\\Desktop\\\\webdev2830\\\\BookWorm\\\\Bookworm\\\\bookworm-client\\\\src\\\\contexts\\\\auth.context.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, createContext } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\nfunction AuthProvider({\n  children\n}) {\n  _s();\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [user, setUser] = useState(null);\n  const storeToken = token => {\n    localStorage.setItem('authToken', token);\n  };\n  const authenticateUser = () => {\n    const storedToken = localStorage.getItem('authToken');\n    if (storedToken) {\n      axios.get(`${process.env.REACT_APP_BACKEND_URL}/auth/verify`, {\n        headers: {\n          authorization: `Bearer ${storedToken}`\n        }\n      }).then(res => {\n        console.log(res);\n        const user = res.data;\n        setIsLoading(false);\n        setIsLoggedIn(true);\n        setUser(user);\n      }).catch(err => {\n        console.log(err);\n        setIsLoading(false);\n        setIsLoggedIn(false);\n        setUser(null);\n      });\n    } else {\n      setIsLoading(false);\n      setIsLoggedIn(false);\n      setUser(null);\n    }\n  };\n  const removeAuthToken = () => {\n    localStorage.removeItem('authToken');\n  };\n  const logOutUser = () => {\n    removeAuthToken();\n    authenticateUser();\n  };\n  useEffect(() => {\n    authenticateUser();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      isLoggedIn,\n      isLoading,\n      user,\n      storeToken,\n      authenticateUser,\n      logOutUser\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n}\n_s(AuthProvider, \"x0xhojeHeHub9c141JVcWBtnWDw=\");\n_c = AuthProvider;\nexport { AuthContext, AuthProvider };\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["useState","useEffect","createContext","axios","jsxDEV","_jsxDEV","AuthContext","AuthProvider","children","_s","isLoggedIn","setIsLoggedIn","isLoading","setIsLoading","user","setUser","storeToken","token","localStorage","setItem","authenticateUser","storedToken","getItem","get","process","env","REACT_APP_BACKEND_URL","headers","authorization","then","res","console","log","data","catch","err","removeAuthToken","removeItem","logOutUser","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/madis/OneDrive/Desktop/webdev2830/BookWorm/Bookworm/bookworm-client/src/contexts/auth.context.js"],"sourcesContent":["import { useState, useEffect, createContext } from 'react';\r\n\r\nimport axios from 'axios';\r\n\r\nconst AuthContext = createContext();\r\n\r\nfunction AuthProvider({ children }){\r\n  const [ isLoggedIn, setIsLoggedIn ] = useState(false);\r\n  const [ isLoading, setIsLoading ] = useState(false);\r\n  const [ user, setUser ] = useState(null);\r\n\r\n  const storeToken = token => {\r\n    localStorage.setItem('authToken', token);\r\n  };\r\n\r\n  const authenticateUser = () => {\r\n\r\n    const storedToken = localStorage.getItem('authToken');\r\n\r\n    if(storedToken){\r\n\r\n      axios.get(`${process.env.REACT_APP_BACKEND_URL}/auth/verify`, {\r\n        headers: {\r\n          authorization: `Bearer ${storedToken}`\r\n        }\r\n      })\r\n        .then(res => {\r\n          console.log(res);\r\n          const user = res.data;\r\n\r\n          setIsLoading(false);\r\n          setIsLoggedIn(true);\r\n          setUser(user);\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n          setIsLoading(false);\r\n          setIsLoggedIn(false);\r\n          setUser(null);\r\n        })\r\n\r\n    } else {\r\n      setIsLoading(false);\r\n      setIsLoggedIn(false);\r\n      setUser(null);\r\n    }\r\n\r\n  }\r\n\r\n  const removeAuthToken = () => {\r\n    localStorage.removeItem('authToken');\r\n  };\r\n\r\n  const logOutUser = () => {\r\n    removeAuthToken();\r\n    authenticateUser();\r\n  }\r\n\r\n  useEffect(() => {\r\n    authenticateUser();\r\n  }, [])\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ isLoggedIn, isLoading, user, storeToken, authenticateUser, logOutUser }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n\r\n}\r\n\r\nexport {\r\n  AuthContext,\r\n  AuthProvider\r\n}"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,aAAa,QAAQ,OAAO;AAE1D,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,MAAMC,WAAW,gBAAGJ,aAAa,CAAC,CAAC;AAEnC,SAASK,YAAYA,CAAC;EAAEC;AAAS,CAAC,EAAC;EAAAC,EAAA;EACjC,MAAM,CAAEC,UAAU,EAAEC,aAAa,CAAE,GAAGX,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAAEY,SAAS,EAAEC,YAAY,CAAE,GAAGb,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAAEc,IAAI,EAAEC,OAAO,CAAE,GAAGf,QAAQ,CAAC,IAAI,CAAC;EAExC,MAAMgB,UAAU,GAAGC,KAAK,IAAI;IAC1BC,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEF,KAAK,CAAC;EAC1C,CAAC;EAED,MAAMG,gBAAgB,GAAGA,CAAA,KAAM;IAE7B,MAAMC,WAAW,GAAGH,YAAY,CAACI,OAAO,CAAC,WAAW,CAAC;IAErD,IAAGD,WAAW,EAAC;MAEblB,KAAK,CAACoB,GAAG,CAAE,GAAEC,OAAO,CAACC,GAAG,CAACC,qBAAsB,cAAa,EAAE;QAC5DC,OAAO,EAAE;UACPC,aAAa,EAAG,UAASP,WAAY;QACvC;MACF,CAAC,CAAC,CACCQ,IAAI,CAACC,GAAG,IAAI;QACXC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;QAChB,MAAMhB,IAAI,GAAGgB,GAAG,CAACG,IAAI;QAErBpB,YAAY,CAAC,KAAK,CAAC;QACnBF,aAAa,CAAC,IAAI,CAAC;QACnBI,OAAO,CAACD,IAAI,CAAC;MACf,CAAC,CAAC,CACDoB,KAAK,CAACC,GAAG,IAAI;QACZJ,OAAO,CAACC,GAAG,CAACG,GAAG,CAAC;QAChBtB,YAAY,CAAC,KAAK,CAAC;QACnBF,aAAa,CAAC,KAAK,CAAC;QACpBI,OAAO,CAAC,IAAI,CAAC;MACf,CAAC,CAAC;IAEN,CAAC,MAAM;MACLF,YAAY,CAAC,KAAK,CAAC;MACnBF,aAAa,CAAC,KAAK,CAAC;MACpBI,OAAO,CAAC,IAAI,CAAC;IACf;EAEF,CAAC;EAED,MAAMqB,eAAe,GAAGA,CAAA,KAAM;IAC5BlB,YAAY,CAACmB,UAAU,CAAC,WAAW,CAAC;EACtC,CAAC;EAED,MAAMC,UAAU,GAAGA,CAAA,KAAM;IACvBF,eAAe,CAAC,CAAC;IACjBhB,gBAAgB,CAAC,CAAC;EACpB,CAAC;EAEDnB,SAAS,CAAC,MAAM;IACdmB,gBAAgB,CAAC,CAAC;EACpB,CAAC,EAAE,EAAE,CAAC;EAEN,oBACEf,OAAA,CAACC,WAAW,CAACiC,QAAQ;IAACC,KAAK,EAAE;MAAE9B,UAAU;MAAEE,SAAS;MAAEE,IAAI;MAAEE,UAAU;MAAEI,gBAAgB;MAAEkB;IAAW,CAAE;IAAA9B,QAAA,EACpGA;EAAQ;IAAAiC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACW,CAAC;AAG3B;AAACnC,EAAA,CA9DQF,YAAY;AAAAsC,EAAA,GAAZtC,YAAY;AAgErB,SACED,WAAW,EACXC,YAAY;AACb,IAAAsC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}